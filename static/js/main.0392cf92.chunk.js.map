{"version":3,"sources":["components/CsvDownloadButton.js","lib/createDownloadableFile.js","components/CsvDownloader.js","lib/mapCsvToPositions.js","components/FileInput.js","lib/readFile.js","components/Map/MapDronePoints.js","components/Map/MapFeatures.js","components/Map/Map.js","components/Sidebar.js","App.js","index.js","components/FileInput.module.css","App.module.css","components/Sidebar.module.css"],"names":["CsvDownloadButton","boatId","waypoints","disabled","filename","contentType","onClick","fileContents","data","navigator","msSaveBlob","blob","Blob","type","element","document","createElement","style","display","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","createDownloadableFile","map","point","i","generateCsvEntryString","join","color","index","lat","toFixed","long","CsvDownloader","React","useState","text","setText","placeholder","value","onChange","e","target","length","mapStringToFloat","str","sign","test","parseFloat","substring","FileInput","props","result","setResult","onFileChange","a","files","console","log","Promise","all","Array","from","f","file","resolve","reject","fr","FileReader","onabort","onerror","readAsText","addEventListener","string","this","resultString","strings","className","styles","fileInputContainer","id","name","multiple","uploadInput","htmlFor","Tooltip","title","Fab","component","TextareaAutosize","Button","res","outputs","split","forEach","line","chunks","code","batteryLvl","Math","round","avgSpeed","avgBearing","avgCurrent","Object","values","mapCsvToPositions","JSON","stringify","onSubmit","POSITION_CIRCLE_PAINT","MapDronePoints","useContext","MapContext","useEffect","popup","mapboxgl","Popup","closeButton","closeOnClick","on","getCanvas","cursor","coordinates","features","geometry","slice","properties","popupLabels","abs","lngLat","lng","key","setLngLat","addTo","setHTML","flyTo","center","remove","paint","droneLocations","loc","DroneID","Longitude","Latitude","MapFeatures","selectedIndices","useRef","points","lines","insertPointAt","current","splice","description","tag","addPoint","refreshMap","getSource","setData","findPointFeature","x","y","selectedFeatures","queryRenderedFeatures","layers","findIndex","el","handleIndexSelect","removePointAt","deselectAll","b","marker","Marker","performAction","keys","indexA","indexB","attemptToPlaceMidpoint","attemptToExtendFromEndpoints","panTo","downHandler","event","keyCode","addSource","addLayer","source","window","removeEventListener","Map","ReactMapboxGl","accessToken","process","MapView","containerStyle","height","width","TabPanel","children","other","role","hidden","Box","sx","p","Typography","Sidebar","panels","currentIndex","setCurrentIndex","sidebar","AppBar","position","Tabs","newValue","indicatorColor","textColor","variant","panel","Tab","label","onChangeIndex","contents","App","pane","setPane","setDroneLocations","setWaypoints","appContainer","listStyle","waypoint","disableWaypointEditing","theme","createTheme","palette","primary","main","secondary","ReactDOM","render","StrictMode","ThemeProvider","getElementById","module","exports"],"mappings":"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","file":"static/js/main.0392cf92.chunk.js","sourcesContent":["import DownloadIcon from \"@mui/icons-material/Download\";\nimport IconButton from \"@mui/material/Button\";\nimport React from \"react\";\n\nimport { createDownloadableFile } from \"../lib/createDownloadableFile\";\n\nconst ROUNDING_ACCURACY = 6;\n\nexport const CsvDownloadButton = ({\n  boatId,\n  waypoints,\n  disabled = false,\n  filename = \"data.csv\",\n  contentType = \"data:text/csv;charset=utf-8,\",\n}) => {\n  const onClick = () => {\n    let fileContents = \"boatId,waypointNumber,latitude,longitude\\n\";\n    fileContents += waypoints.map((point, i) => generateCsvEntryString(boatId, i, point)).join(\"\\n\");\n    createDownloadableFile(fileContents, filename, contentType);\n  };\n\n  return (\n    <IconButton disabled={disabled} onClick={onClick}>\n      <DownloadIcon color={\"primary\"} />\n    </IconButton>\n  );\n};\n\nconst generateCsvEntryString = (boatId, index, data) => {\n  return `${boatId},${index + 1},${data.lat.toFixed(ROUNDING_ACCURACY)},${data.long.toFixed(ROUNDING_ACCURACY)}`;\n};\n","// Taken from: https://medium.com/@szpytfire/create-a-downloadable-file-using-javascript-typescript-c7d8bf798baa\n\nexport const createDownloadableFile = (data, filename, contentType) => {\n  // IE 11\n  if (navigator.msSaveBlob) {\n    // Use IE11's APIs\n    const blob = new Blob([data], {\n      type: contentType,\n    });\n    navigator.msSaveBlob(blob, filename);\n    return;\n  }\n\n  // Other browsers\n  // Create a hidden anchor link\n  const element = document.createElement(\"a\");\n  element.style.display = \"none\";\n\n  // Attach the content to the anchor\n  element.setAttribute(\"href\", contentType + encodeURIComponent(data));\n  element.setAttribute(\"download\", filename);\n  // Append to DOM and simulate click (this will trigger the download)\n  document.body.appendChild(element);\n  element.click();\n  // Cleanup\n  document.body.removeChild(element);\n};\n","import React from \"react\";\n\nimport { CsvDownloadButton } from \"./CsvDownloadButton\";\n\nexport const CsvDownloader = ({ waypoints }) => {\n  const [text, setText] = React.useState(\"\");\n\n  return (\n    <div>\n      <input placeholder=\"Boat ID\" value={text} onChange={(e) => setText(e.target.value)} />\n      <CsvDownloadButton disabled={!text || waypoints.length === 0} boatId={text} waypoints={waypoints} />\n    </div>\n  );\n};\n","const TOTAL_VOLTAGE = 13.61;\n\nexport const mapCsvToPositions = (text) => {\n  const outputs = {};\n  text.split(\"\\n\").forEach((line) => {\n    const chunks = line.split(\",\");\n    if (chunks.length === 0 || chunks.length !== 7) {\n      return null;\n    }\n    console.log(chunks);\n    console.log(\"chunks length: \", chunks.length);\n    const code = chunks[0];\n    const id = chunks[1];\n\n    if (!outputs[id]) {\n      outputs[id] = { id };\n    }\n\n    if (code === \"P\") {\n      const batteryLvl =\n        Math.round((chunks[2] / TOTAL_VOLTAGE) * 100, 2) + \"% (\" + chunks[2] + \"/\" + TOTAL_VOLTAGE + \"V)\";\n      outputs[id].batteryLvl = batteryLvl;\n    } else if (code === \"M\") {\n      const lat = mapStringToFloat(chunks[2]);\n      const long = mapStringToFloat(chunks[3]);\n      const avgSpeed = chunks[4] + \" NM/H\";\n      const avgBearing = chunks[5];\n      const avgCurrent = chunks[6];\n\n      outputs[id].lat = lat;\n      outputs[id].long = long;\n      outputs[id].avgSpeed = avgSpeed;\n      outputs[id].avgBearing = avgBearing;\n      outputs[id].avgCurrent = avgCurrent;\n    }\n  });\n\n  return Object.values(outputs);\n};\n\nconst mapStringToFloat = (str) => {\n  let sign = 1;\n  if (/[SW]$/.test(str)) {\n    sign = -1;\n  }\n  return sign * parseFloat(str.substring(0, str.length - 1));\n};\n","import UploadFileIcon from \"@mui/icons-material/UploadFile\";\nimport Button from \"@mui/material/Button\";\nimport Fab from \"@mui/material/Fab\";\nimport TextareaAutosize from \"@mui/material/TextareaAutosize\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport React from \"react\";\n\nimport { mapCsvToPositions } from \"../lib/mapCsvToPositions\";\nimport { readFileAsText } from \"../lib/readFile\";\nimport styles from \"./FileInput.module.css\";\n\nconst defaultValue = `M,UL997,37.821608S,145.313996E,470668.68,3,3.4\nP,UL997,12.68,26.3,3.4,41.3,0.0`;\n\nexport const FileInput = (props) => {\n  const [text, setText] = React.useState(defaultValue);\n  const [result, setResult] = React.useState(\"\");\n\n  const onClick = () => {\n    const res = mapCsvToPositions(text);\n    console.log(res);\n    setResult(JSON.stringify(res, null, 2));\n\n    // Return the result to parent\n    if (props.onSubmit) {\n      props.onSubmit(res);\n    }\n  };\n\n  const onFileChange = async (e) => {\n    const files = e.target.files;\n    console.log(files);\n    const strings = await Promise.all(Array.from(files).map((f) => readFileAsText(f)));\n    setText(strings.join(\"\\n\"));\n  };\n\n  return (\n    <div className={styles.fileInputContainer}>\n      <input\n        type=\"file\"\n        id=\"fileInput\"\n        name=\"fileInput\"\n        multiple={true}\n        onChange={onFileChange}\n        className={styles.uploadInput}\n      />\n      <label htmlFor=\"fileInput\">\n        <Tooltip title={\"Upload a CSV File\"}>\n          <Fab component={\"span\"} color={\"primary\"}>\n            <UploadFileIcon />\n          </Fab>\n        </Tooltip>\n      </label>\n      <TextareaAutosize onChange={(e) => setText(e.target.value)}>{text}</TextareaAutosize>\n      <Button onClick={onClick}>submit</Button>\n      <pre>{result}</pre>\n    </div>\n  );\n};\n","export const readFileAsText = (file) => {\n  return new Promise((resolve, reject) => {\n    const fr = new FileReader();\n    fr.onabort = () => reject(\"file reading was aborted\");\n    fr.onerror = () => reject(\"file reading has failed\");\n    if (fr.readAsText) {\n      fr.addEventListener(\n        \"load\",\n        function () {\n          const string = this.resultString != null ? this.resultString : this.result;\n          resolve(string);\n        },\n        false,\n      );\n      fr.readAsText(file);\n    } else {\n      reject(\"Failed to read file\");\n    }\n  });\n};\n","import mapboxgl from \"mapbox-gl\";\nimport React from \"react\";\nimport { Feature, Layer, MapContext } from \"react-mapbox-gl\";\n\nconst POSITION_CIRCLE_PAINT = {\n  \"circle-stroke-width\": 2,\n  \"circle-radius\": 8,\n  \"circle-blur\": 0.15,\n  \"circle-color\": \"#3770C6\",\n  \"circle-stroke-color\": \"white\",\n};\n\nexport const MapDronePoints = (props) => {\n  const map = React.useContext(MapContext);\n  React.useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    // popup creation for each drone\n    const popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false,\n    });\n\n    map.on(\"mouseenter\", \"position-marker\", (e) => {\n      map.getCanvas().style.cursor = \"pointer\";\n      const coordinates = e.features[0].geometry.coordinates.slice();\n      const properties = e.features[0].properties;\n      var popupLabels = \"\";\n\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n      }\n\n      popup.setLngLat(coordinates).addTo(map);\n\n      for (var key in properties) {\n        var title = key + \": \";\n        if (key === \"DroneID\") {\n          title = \"<strong>\" + properties[key] + \"</strong><br>\";\n          popupLabels += title;\n        } else if (key !== \"id\") {\n          popupLabels += title + properties[key] + \"<br>\";\n          console.log(properties[key]);\n          popup.setHTML(popupLabels);\n        }\n      }\n    });\n\n    map.on(\"click\", \"position-marker\", (e) => {\n      map.flyTo({\n        center: e.features[0].geometry.coordinates,\n      });\n    });\n\n    map.on(\"mouseenter\", \"position-marker\", () => {\n      map.getCanvas().style.cursor = \"pointer\";\n    });\n\n    map.on(\"mouseleave\", \"position-marker\", () => {\n      map.getCanvas().style.cursor = \"\";\n      popup.remove();\n    });\n  }, [map]);\n\n  // Drawing the layers contain the location of each drone.\n  return (\n    <Layer type=\"circle\" id=\"position-marker\" paint={POSITION_CIRCLE_PAINT}>\n      {props.droneLocations.map((loc, index) => (\n        <Feature\n          key={index}\n          coordinates={[loc.long, loc.lat]}\n          properties={{\n            DroneID: loc.id,\n            Longitude: loc.long,\n            Latitude: loc.lat,\n            \"Battery Level\": loc.batteryLvl,\n            \"Average Speed\": loc.avgSpeed,\n            \"Average Bearing\": loc.avgBearing,\n            \"Average Current\": loc.avgCurrent,\n          }}\n        />\n      ))}\n    </Layer>\n  );\n};\n","import mapboxgl from \"mapbox-gl\";\nimport React, { useRef } from \"react\";\nimport { MapContext } from \"react-mapbox-gl\";\n\nexport const MapFeatures = (props) => {\n  const map = React.useContext(MapContext);\n\n  const selectedIndices = useRef(null);\n  const points = useRef(null);\n  const lines = useRef(null);\n\n  const onChange = (data) => {\n    const res = data.map(([long, lat]) => ({ long, lat }));\n    if (props.onChange) {\n      props.onChange(res);\n    }\n  };\n\n  function addPoint(coordinates) {\n    return {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates,\n      },\n      properties: {\n        description: \"<p>\" + JSON.stringify(coordinates) + \"</p>\",\n        tag: JSON.stringify(coordinates),\n      },\n    };\n  }\n\n  function init() {\n    selectedIndices.current = {};\n\n    lines.current = {\n      type: \"FeatureCollection\",\n      features: [\n        {\n          type: \"Feature\",\n          geometry: {\n            type: \"LineString\",\n            coordinates: [],\n          },\n        },\n      ],\n    };\n\n    points.current = {\n      type: \"FeatureCollection\",\n      features: [],\n    };\n\n    map.addSource(\"lines\", { type: \"geojson\", data: lines.current });\n    map.addSource(\"points\", { type: \"geojson\", data: points.current });\n\n    map.addLayer({\n      id: \"lines\",\n      type: \"line\",\n      source: \"lines\",\n      paint: {\n        \"line-color\": \"yellow\",\n        \"line-opacity\": 0.75,\n        \"line-width\": 5,\n      },\n    });\n\n    map.addLayer({\n      id: \"points\",\n      type: \"circle\",\n      source: \"points\",\n      paint: {\n        \"circle-radius\": 6,\n        \"circle-color\": \"#B42222\",\n      },\n    });\n  }\n\n  function insertPointAt(index, coordinates) {\n    points.current.features.splice(index, 0, addPoint(coordinates));\n    lines.current.features[0].geometry.coordinates.splice(index, 0, coordinates);\n    refreshMap();\n    onChange(lines.current.features[0].geometry.coordinates);\n  }\n\n  function removePointAt(index) {\n    points.current.features.splice(index, 1);\n    lines.current.features[0].geometry.coordinates.splice(index, 1);\n    refreshMap();\n    onChange(lines.current.features[0].geometry.coordinates);\n  }\n\n  function refreshMap() {\n    map.getSource(\"lines\").setData(lines.current);\n    map.getSource(\"points\").setData(points.current);\n  }\n\n  function findPointFeature(e) {\n    const [x, y] = [e.point.x, e.point.y];\n\n    const selectedFeatures = map.queryRenderedFeatures(\n      [\n        [x - 5, y - 5],\n        [x + 5, y + 5],\n      ],\n      {\n        layers: [\"points\"],\n      },\n    );\n\n    if (selectedFeatures.length > 0) {\n      return getIndexOfTag(selectedFeatures[0].properties.tag);\n    } else {\n      return null;\n    }\n  }\n\n  function getIndexOfTag(tag) {\n    return points.current.features.findIndex((el) => el.properties.tag === tag);\n  }\n\n  function handleIndexSelect(index) {\n    if (selectedIndices.current.a && selectedIndices.current.a.index === index) {\n      removePointAt(index);\n      deselectAll();\n      return;\n    }\n\n    if (selectedIndices.current.b) {\n      selectedIndices.current.b.marker.remove();\n    }\n    if (selectedIndices.current.a) {\n      selectedIndices.current.b = selectedIndices.current.a;\n    }\n\n    const marker = new mapboxgl.Marker().setLngLat(points.current.features[index].geometry.coordinates).addTo(map);\n\n    selectedIndices.current.a = { index, marker };\n  }\n\n  function performAction(coordinates) {\n    const length = points.current.features.length;\n    if (length === 0) {\n      // place initial point\n      insertPointAt(0, coordinates);\n      handleIndexSelect(0);\n    } else {\n      if (Object.keys(selectedIndices.current).length === 2) {\n        attemptToPlaceMidpoint(coordinates);\n      } else if (Object.keys(selectedIndices.current).length === 1) {\n        attemptToExtendFromEndpoints(coordinates);\n      } else {\n        map.panTo(points.current.features[0].geometry.coordinates);\n      }\n    }\n  }\n\n  function attemptToPlaceMidpoint(coordinates) {\n    let indexA = selectedIndices.current.a.index;\n    let indexB = selectedIndices.current.b.index;\n\n    if (indexA > indexB) {\n      [indexA, indexB] = [indexB, indexA];\n    }\n\n    if (indexB - indexA === 1) {\n      insertPointAt(indexB, coordinates);\n      deselectAll();\n    }\n  }\n\n  function attemptToExtendFromEndpoints(coordinates) {\n    const length = points.current.features.length;\n    if (selectedIndices.current.a.index === points.current.features.length - 1) {\n      insertPointAt(length, coordinates);\n      deselectAll();\n      handleIndexSelect(length);\n    } else if (selectedIndices.current.a.index === 0) {\n      insertPointAt(0, coordinates);\n      deselectAll();\n      handleIndexSelect(0);\n    }\n  }\n\n  function deselectAll() {\n    if (selectedIndices.current.a) {\n      selectedIndices.current.a.marker.remove();\n    }\n    if (selectedIndices.current.b) {\n      selectedIndices.current.b.marker.remove();\n    }\n    selectedIndices.current = {};\n  }\n\n  function downHandler(event) {\n    if (event.keyCode === 27) {\n      deselectAll();\n    }\n  }\n\n  React.useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    init();\n\n    map.on(\"click\", (e) => {\n      const index = findPointFeature(e);\n      if (index !== null) {\n        handleIndexSelect(index);\n      } else {\n        performAction([e.lngLat.lng, e.lngLat.lat]);\n      }\n    }); // click\n\n    // right click\n    map.on(\"contextmenu\", () => {\n      deselectAll();\n    });\n\n    window.addEventListener(\"keydown\", downHandler);\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener(\"keydown\", downHandler);\n    };\n  }, [map]);\n\n  return null;\n};\n","import React from \"react\";\nimport ReactMapboxGl from \"react-mapbox-gl\";\n\nimport { MapDronePoints } from \"./MapDronePoints\";\nimport { MapFeatures } from \"./MapFeatures\";\n\n// eslint-disable-next-line new-cap\nconst Map = ReactMapboxGl({\n  accessToken: process.env.REACT_APP_MAPBOX_KEY,\n});\n\nexport const MapView = ({ droneLocations, onChange }) => {\n  return (\n    <div>\n      <Map\n        style=\"mapbox://styles/mapbox/streets-v9\"\n        containerStyle={{\n          height: \"100%\",\n          width: \"100%\",\n        }}\n      >\n        <MapDronePoints droneLocations={droneLocations} />\n\n        <MapFeatures onChange={onChange} />\n      </Map>\n    </div>\n  );\n};\n","import AppBar from \"@mui/material/AppBar\";\nimport Box from \"@mui/material/Box\";\nimport Tab from \"@mui/material/Tab\";\nimport Tabs from \"@mui/material/Tabs\";\nimport Typography from \"@mui/material/Typography\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport styles from \"./Sidebar.module.css\";\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n          <Typography>{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    \"aria-controls\": `full-width-tabpanel-${index}`,\n  };\n}\n\nexport const Sidebar = ({ panels, currentIndex, setCurrentIndex }) => {\n  const value = currentIndex;\n\n  const handleChange = (event, newValue) => {\n    setCurrentIndex(newValue);\n  };\n\n  const handleChangeIndex = (index) => {\n    setCurrentIndex(index);\n  };\n  return (\n    <Box className={styles.sidebar}>\n      <AppBar position=\"static\">\n        <Tabs value={value} onChange={handleChange} indicatorColor=\"secondary\" textColor=\"inherit\" variant=\"fullWidth\">\n          {panels.map((panel, i) => {\n            return <Tab key={panel.label} label={panel.label} {...a11yProps(i)} />;\n          })}\n        </Tabs>\n      </AppBar>\n      <SwipeableViews index={value} onChangeIndex={handleChangeIndex}>\n        {panels.map((panel, i) => {\n          return (\n            <TabPanel key={panel.label} value={value} index={i}>\n              {panel.contents}\n            </TabPanel>\n          );\n        })}\n      </SwipeableViews>\n    </Box>\n  );\n};\n\nSidebar.propTypes = {\n  setCurrentIndex: PropTypes.func.isRequired,\n  panels: PropTypes.object.isRequired,\n  currentIndex: PropTypes.number.isRequired,\n};\n","import React from \"react\";\n\nimport styles from \"./App.module.css\";\nimport { CsvDownloader } from \"./components/CsvDownloader\";\nimport { FileInput } from \"./components/FileInput\";\nimport { MapView } from \"./components/Map/Map\";\nimport { Sidebar } from \"./components/Sidebar\";\n\nfunction App() {\n  const [pane, setPane] = React.useState(0);\n  const [droneLocations, setDroneLocations] = React.useState([]);\n  const [waypoints, setWaypoints] = React.useState([]);\n\n  return (\n    <div className={styles.appContainer}>\n      <Sidebar\n        currentIndex={pane}\n        setCurrentIndex={setPane}\n        panels={[\n          {\n            label: \"Import\",\n            contents: <FileInput onSubmit={setDroneLocations} />,\n          },\n          {\n            label: \"Export\",\n            contents: (\n              <div>\n                <div>\n                  {waypoints.length === 0 ? (\n                    <span>No waypoints selected</span>\n                  ) : (\n                    <ol style={{ listStyle: \"decimal\" }}>\n                      {waypoints.map((waypoint, i) => {\n                        return <li key={i}>{`[${waypoint.long}, ${waypoint.lat}]`}</li>;\n                      })}\n                    </ol>\n                  )}\n                </div>\n                <CsvDownloader waypoints={waypoints} />\n              </div>\n            ),\n          },\n        ]}\n      />\n      <MapView droneLocations={droneLocations} onChange={setWaypoints} disableWaypointEditing={pane === 0} />\n    </div>\n  );\n}\n\nexport { App };\n","import \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"./index.css\";\n\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { App } from \"./App\";\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: \"#272264\",\n    },\n    secondary: {\n      main: \"#a7b1b8\",\n    },\n  },\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fileInputContainer\":\"FileInput_fileInputContainer__2FREY\",\"uploadInput\":\"FileInput_uploadInput__3LcYe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"App_appContainer__3jRx1\",\"leftPanelContents\":\"App_leftPanelContents__31oAi\",\"logo\":\"App_logo__1ItuU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"Sidebar_sidebar__2go77\"};"],"sourceRoot":""}