{"version":3,"sources":["App.module.css","FileInput.module.css","lib/mapCsvToPositions.js","FileInput.js","lib/readFile.js","Map/MapFeatures.js","Map/MapDronePoints.js","Map/Map.js","App.js","index.js"],"names":["module","exports","isNegativeCoordinate","mapStringToFloat","str","sign","test","parseFloat","substring","length","FileInput","props","React","useState","text","setText","result","setResult","onFileChange","e","a","files","target","console","log","Promise","all","Array","from","map","f","file","resolve","reject","fr","FileReader","onabort","onerror","readAsText","addEventListener","string","this","resultString","strings","join","className","styles","fileInputContainer","htmlFor","type","id","name","multiple","onChange","value","rows","onClick","res","split","line","chunks","lat","long","filter","r","mapCsvToPositions","JSON","stringify","onSubmit","format","coordinates","geometry","properties","description","MapFeatures","selected","useRef","useContext","MapContext","useEffect","trace","features","trace2","addSource","data","addLayer","source","paint","panTo","on","bbox","point","x","y","selectedFeatures","queryRenderedFeatures","layers","slice","Math","abs","lngLat","lng","mapboxgl","Popup","setLngLat","setHTML","addTo","current","index","findIndex","el","splice","push","getSource","setData","POSITION_CIRCLE_PAINT","MapDronePoints","popup","closeButton","closeOnClick","getCanvas","style","cursor","popupLabels","key","title","flyTo","center","remove","droneLocations","loc","Map","ReactMapboxGl","accessToken","process","MapView","containerStyle","height","width","App","setDroneLocations","appContainer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.94479dfc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"App_appContainer__3jRx1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fileInputContainer\":\"FileInput_fileInputContainer__3K1pc\"};","const isNegativeCoordinate = /[SW]$/\n\nexport const mapCsvToPositions = (text) => {\n  const results = text.split(\"\\n\").map((line) => {\n    console.log(line);\n    const chunks = line.split(\",\");\n    if (chunks.length === 0) {\n      return null;\n    }\n    console.log(\"chunks length: \", chunks.length);\n    const code = chunks[0];\n    if (code !== \"M\" || chunks.length !== 7) {\n      return null;\n    }\n    const id = chunks[1];\n    const lat = mapStringToFloat(chunks[2]);\n    const long = mapStringToFloat(chunks[3]);\n    return { id, lat, long };\n  });\n  return results.filter((r) => r !== null);\n};\n\nconst mapStringToFloat = (str) => {\n  let sign = 1.\n  if (isNegativeCoordinate.test(str)) {\n    sign = -1.\n  }\n  return sign * parseFloat(str.substring(0, str.length - 1));\n};\n","import React from \"react\";\n\nimport styles from \"./FileInput.module.css\";\nimport { mapCsvToPositions } from \"./lib/mapCsvToPositions\";\nimport { readFileAsText } from \"./lib/readFile\";\n\nconst defaultValue = `M,UL997,37.821608S,145.313996E,470668.68,3,3.4\nP,UL997,12.68,26.3,3.4,41.3,0.0`;\n\nexport const FileInput = (props) => {\n  const [text, setText] = React.useState(defaultValue);\n  const [result, setResult] = React.useState(\"\");\n\n  const onClick = () => {\n    const res = mapCsvToPositions(text);\n    console.log(res);\n    setResult(JSON.stringify(res, null, 2));\n\n    // Return the result to parent\n    if (props.onSubmit) {\n      props.onSubmit(res);\n    }\n  };\n\n  const onFileChange = async (e) => {\n    const files = e.target.files;\n    console.log(files);\n    const strings = await Promise.all(Array.from(files).map((f) => readFileAsText(f)));\n    setText(strings.join(\"\\n\"));\n  };\n\n  return (\n    <div className={styles.fileInputContainer}>\n      <label htmlFor=\"fileInput\">Select a CSV file:</label>\n      <input type=\"file\" id=\"fileInput\" name=\"fileInput\" multiple={true} onChange={onFileChange} />\n      <textarea value={text} onChange={(e) => setText(e.target.value)} rows={20} />\n      <button onClick={onClick}>submit</button>\n      <pre>{result}</pre>\n    </div>\n  );\n};\n","export const readFileAsText = (file) => {\n  return new Promise((resolve, reject) => {\n    const fr = new FileReader();\n    fr.onabort = () => reject(\"file reading was aborted\");\n    fr.onerror = () => reject(\"file reading has failed\");\n    if (fr.readAsText) {\n      fr.addEventListener(\n        \"load\",\n        function () {\n          const string = this.resultString != null ? this.resultString : this.result;\n          resolve(string);\n        },\n        false,\n      );\n      fr.readAsText(file);\n    } else {\n      reject(\"Failed to read file\");\n    }\n  });\n};\n","import React, { useRef } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport { MapContext } from \"react-mapbox-gl\";\n\nfunction format(coordinates) {\n  return {\n    type: \"Feature\",\n    geometry: {\n      type: \"Point\",\n      coordinates,\n    },\n    properties: {\n      description: JSON.stringify(coordinates),\n    },\n  };\n}\n\nexport const MapFeatures = () => {\n  const selected = useRef(null);\n\n  const map = React.useContext(MapContext);\n  React.useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    const trace = {\n      type: \"FeatureCollection\",\n      features: [\n        {\n          type: \"Feature\",\n          geometry: {\n            type: \"LineString\",\n            coordinates: [[-122.019807, 45.632433]],\n          },\n        },\n      ],\n    };\n\n    const trace2 = {\n      type: \"FeatureCollection\",\n      features: [\n        {\n          type: \"Feature\",\n          geometry: {\n            type: \"Point\",\n            coordinates: [-122.019807, 45.632433],\n          },\n          properties: {\n            description: \"hello\",\n          },\n        },\n      ],\n    };\n\n    map.addSource(\"trace\", { type: \"geojson\", data: trace });\n    map.addSource(\"trace2\", { type: \"geojson\", data: trace2 });\n\n    map.addLayer({\n      id: \"trace\",\n      type: \"line\",\n      source: \"trace\",\n      paint: {\n        \"line-color\": \"yellow\",\n        \"line-opacity\": 0.75,\n        \"line-width\": 5,\n      },\n    });\n    // map.addLayer({\n    //   id: \"trace2\",\n    //   type: \"line\",\n    //   source: \"trace2\",\n    //   paint: {\n    //     \"line-color\": \"purple\",\n    //     \"line-opacity\": 0.75,\n    //     \"line-width\": 5,\n    //   },\n    // });\n    map.addLayer({\n      id: \"trace2\",\n      type: \"circle\",\n      source: \"trace2\",\n      paint: {\n        \"circle-radius\": 6,\n        \"circle-color\": \"#B42222\",\n      },\n    });\n    map.panTo(trace.features[0].geometry.coordinates[0]);\n\n    map.on(\"click\", (e) => {\n      const bbox = [\n        [e.point.x - 5, e.point.y - 5],\n        [e.point.x + 5, e.point.y + 5],\n      ];\n      // Find features intersecting the bounding box.\n      const selectedFeatures = map.queryRenderedFeatures(bbox, {\n        layers: [\"trace2\"],\n      });\n\n      // Copy coordinates array.\n      if (selectedFeatures.length > 0) {\n        const coordinates = selectedFeatures[0].geometry.coordinates.slice();\n        const description = selectedFeatures[0].properties.description;\n\n        console.log(selectedFeatures[0]);\n\n        // Ensure that if the map is zoomed out such that multiple\n        // copies of the feature are visible, the popup appears\n        // over the copy being pointed to.\n        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n          coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n        }\n\n        new mapboxgl.Popup().setLngLat(coordinates).setHTML(description).addTo(map);\n      } else {\n        console.log(e);\n        const { lng, lat } = e.lngLat;\n        console.log([lng, lat]);\n\n        if (selected.current) {\n          console.log(\"selected\", selected.current);\n          console.log(JSON.stringify(trace2));\n          const index = trace2.features.findIndex((el) => el.properties.description === selected.current);\n          console.log(index);\n          trace.features[0].geometry.coordinates.splice(index + 1, 0, [lng, lat]);\n          trace2.features.splice(index + 1, 0, format([lng, lat]));\n          selected.current = null;\n        } else {\n          trace.features[0].geometry.coordinates.push([lng, lat]);\n          trace2.features.push(format([lng, lat]));\n        }\n\n        map.getSource(\"trace\").setData(trace);\n        map.getSource(\"trace2\").setData(trace2);\n      }\n    });\n\n    map.on(\"contextmenu\", (e) => {\n      const bbox = [\n        [e.point.x - 5, e.point.y - 5],\n        [e.point.x + 5, e.point.y + 5],\n      ];\n      // Find features intersecting the bounding box.\n      const selectedFeatures = map.queryRenderedFeatures(bbox, {\n        layers: [\"trace2\"],\n      });\n\n      if (selectedFeatures.length === 0) return;\n      const coordinates = selectedFeatures[0].geometry.coordinates.slice();\n      const description = selectedFeatures[0].properties.description;\n\n      console.log(selected.current, \"->\", description);\n      console.log(trace2);\n      if (selected.current !== description) {\n        selected.current = description;\n      } else {\n        // console.log(selectedFeatures[0])\n\n        // console.log(trace2.features)\n        // console.log(coordinates)\n\n        const index = trace2.features.findIndex((el) => el.properties.description === description);\n\n        console.log(trace, trace2);\n\n        trace.features[0].geometry.coordinates.splice(index, 1);\n        console.log(trace2.features.splice(index, 1));\n\n        console.log(trace, trace2);\n\n        map.getSource(\"trace\").setData(trace);\n        map.getSource(\"trace2\").setData(trace2);\n        selected.current = null;\n      }\n    });\n  }, [map]);\n\n  return null;\n};\n","import React, { useRef } from \"react\";\nimport ReactMapboxGl, { Layer, Feature, MapContext, Popup } from \"react-mapbox-gl\";\nimport mapboxgl from \"mapbox-gl\";\n\nconst POSITION_CIRCLE_PAINT = {\n  \"circle-stroke-width\": 2,\n  \"circle-radius\": 8,\n  \"circle-blur\": 0.15,\n  \"circle-color\": \"#3770C6\",\n  \"circle-stroke-color\": \"white\",\n};\n\nexport const MapDronePoints = (props) => {\n  const map = React.useContext(MapContext);\n  React.useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    // popup creation for each drone\n    const popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n\n    map.on('mouseenter', 'position-marker', (e) => {\n      map.getCanvas().style.cursor = 'pointer';\n      const coordinates = e.features[0].geometry.coordinates.slice();\n      const properties = e.features[0].properties;\n      var popupLabels = \"\"\n\n\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n      }\n\n      popup.setLngLat(coordinates).addTo(map)\n\n      for (var key in properties) {\n        var title = key + \": \"\n        if (key === \"DroneID\") {\n          title = \"<strong>\" + properties[key] + \"</strong><br>\"\n          popupLabels += title\n        }\n        else if (key !== \"id\") {\n          popupLabels += title + properties[key] + \"<br>\"\n          console.log(properties[key])\n          popup.setHTML(popupLabels)\n        }\n\n      }\n\n    })\n\n    map.on('click', 'position-marker', (e) => {\n      map.flyTo({\n        center: e.features[0].geometry.coordinates\n      });\n    });\n\n    map.on('mouseenter', 'position-marker', () => {\n      map.getCanvas().style.cursor = 'pointer';\n    });\n\n    map.on('mouseleave', 'position-marker', () => {\n      map.getCanvas().style.cursor = '';\n      popup.remove();\n    })\n\n  }, [map]);\n\n  // Drawing the layers contain the location of each drone.\n  return (<Layer type=\"circle\" id=\"position-marker\" paint={POSITION_CIRCLE_PAINT}>\n    {props.droneLocations.map((loc, index) => (\n      <Feature key={index} coordinates={[loc.long, loc.lat]} properties={{ \"DroneID\": loc.id, \"longitude\": loc.long, \"latitude\": loc.lat }} />\n    ))}\n  </Layer>);\n};\n","import React from \"react\";\nimport ReactMapboxGl from \"react-mapbox-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport { MapFeatures } from \"./MapFeatures\";\nimport { MapDronePoints } from \"./MapDronePoints\";\n\nconst Map = ReactMapboxGl({\n  accessToken: process.env.REACT_APP_MAPBOX_KEY,\n});\n\nexport const MapView = ({ droneLocations }) => {\n  return (\n    <div>\n      <Map\n        style=\"mapbox://styles/mapbox/streets-v9\"\n        containerStyle={{\n          height: \"100%\",\n          width: \"100%\",\n        }}\n      >\n        <MapDronePoints droneLocations={droneLocations} />\n\n        <MapFeatures />\n      </Map>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport styles from \"./App.module.css\";\nimport { FileInput } from \"./FileInput\";\nimport { MapView } from \"./Map/Map\";\n\nfunction App() {\n  const [droneLocations, setDroneLocations] = React.useState([]);\n  const onSubmit = (res) => setDroneLocations(res);\n\n  return (\n    <div className={styles.appContainer}>\n      <FileInput onSubmit={onSubmit} />\n      <MapView droneLocations={droneLocations} />\n    </div>\n  );\n}\n\nexport { App };\n","import \"./index.css\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { App } from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}