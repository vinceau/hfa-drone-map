{"version":3,"sources":["App.module.css","FileInput.module.css","Map.js","FileInput.js","lib/mapCsvToPositions.js","App.js","index.js"],"names":["module","exports","Map","ReactMapboxGl","accessToken","process","MapView","style","containerStyle","height","width","Consumer","map","data","type","features","geometry","coordinates","addSource","addLayer","id","source","paint","panTo","on","e","a","lngLat","lng","lat","console","log","push","getSource","setData","FileInput","React","useState","text","setText","result","setResult","className","styles","fileInputContainer","value","onChange","target","onClick","res","split","line","chunks","length","long","filter","r","mapCsvToPositions","JSON","stringify","App","appContainer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wGACAA,EAAOC,QAAU,CAAC,aAAe,4B,mBCAjCD,EAAOC,QAAU,CAAC,mBAAqB,wC,2KCGjCC,G,MAAMC,YAAc,CACxBC,YAAaC,mGAsDAC,EAnDC,WACd,OACE,6BACE,kBAACJ,EAAD,CACEK,MAAM,oCACNC,eAAgB,CACdC,OAAQ,OACRC,MAAO,SAGT,kBAAC,IAAWC,SAAZ,MACG,SAACC,GACA,IAAMC,EAAO,CACXC,KAAM,oBACNC,SAAU,CACR,CACED,KAAM,UACNE,SAAU,CACRF,KAAM,aACNG,YAAa,CAAC,EAAE,WAAY,gBAMpCL,EAAIM,UAAU,QAAS,CAAEJ,KAAM,UAAWD,KAAMA,IAChDD,EAAIO,SAAS,CACXC,GAAI,QACJN,KAAM,OACNO,OAAQ,QACRC,MAAO,CACL,aAAc,SACd,eAAgB,IAChB,aAAc,KAGlBV,EAAIW,MAAMV,EAAKE,SAAS,GAAGC,SAASC,YAAY,IAEhDL,EAAIY,GAAG,QAAP,uCAAgB,WAAOC,GAAP,mBAAAC,EAAA,wDACOD,EAAEE,OAAfC,EADM,EACNA,IAAKC,EADC,EACDA,IACbC,QAAQC,IAAI,CAACH,EAAKC,IAClBhB,EAAKE,SAAS,GAAGC,SAASC,YAAYe,KAAK,CAACJ,EAAKC,IACjDjB,EAAIqB,UAAU,SAASC,QAAQrB,GAJjB,2CAAhB,6D,yCCvCCsB,EAAY,WAAO,IAAD,EACLC,IAAMC,SAJd,mFAGa,mBACtBC,EADsB,KAChBC,EADgB,OAEDH,IAAMC,SAAS,IAFd,mBAEtBG,EAFsB,KAEdC,EAFc,KAQ7B,OACE,yBAAKC,UAAWC,IAAOC,oBACrB,8BAAUC,MAAOP,EAAMQ,SAAU,SAACrB,GAAD,OAAOc,EAAQd,EAAEsB,OAAOF,UACzD,4BAAQG,QARI,WACd,IAAMC,ECXuB,SAACX,GAiBhC,OAhBgBA,EAAKY,MAAM,MAAMtC,KAAI,SAACuC,GACpCrB,QAAQC,IAAIoB,GACZ,IAAMC,EAASD,EAAKD,MAAM,KAC1B,OAAsB,IAAlBE,EAAOC,OACF,MAETvB,QAAQC,IAAI,kBAAmBqB,EAAOC,QAEzB,MADAD,EAAO,IACkB,IAAlBA,EAAOC,OAClB,KAKF,CAAEjC,GAHEgC,EAAO,GAGLvB,IAFDuB,EAAO,GAEDE,KADLF,EAAO,QAGPG,QAAO,SAACC,GAAD,OAAa,OAANA,KDNfC,CAAkBnB,GAC9BR,QAAQC,IAAIkB,GACZR,EAAUiB,KAAKC,UAAUV,EAAK,KAAM,MAKlC,UACA,6BAAMT,KELGoB,MATf,WACE,OACE,yBAAKlB,UAAWC,IAAOkB,cACrB,kBAAC,EAAD,MACA,kBAAC,EAAD,QCJNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.5b0fc8db.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"App_appContainer__3jRx1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fileInputContainer\":\"FileInput_fileInputContainer__3K1pc\"};","import React from \"react\";\nimport ReactMapboxGl, { MapContext } from \"react-mapbox-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\n\nconst Map = ReactMapboxGl({\n  accessToken: process.env.REACT_APP_MAPBOX_KEY,\n});\n\nconst MapView = () => {\n  return (\n    <div>\n      <Map\n        style=\"mapbox://styles/mapbox/streets-v9\"\n        containerStyle={{\n          height: \"100%\",\n          width: \"100%\",\n        }}\n      >\n        <MapContext.Consumer>\n          {(map) => {\n            const data = {\n              type: \"FeatureCollection\",\n              features: [\n                {\n                  type: \"Feature\",\n                  geometry: {\n                    type: \"LineString\",\n                    coordinates: [[-122.019807, 45.632433]],\n                  },\n                },\n              ],\n            };\n\n            map.addSource(\"trace\", { type: \"geojson\", data: data });\n            map.addLayer({\n              id: \"trace\",\n              type: \"line\",\n              source: \"trace\",\n              paint: {\n                \"line-color\": \"yellow\",\n                \"line-opacity\": 0.75,\n                \"line-width\": 5,\n              },\n            });\n            map.panTo(data.features[0].geometry.coordinates[0]);\n\n            map.on(\"click\", async (e) => {\n              const { lng, lat } = e.lngLat;\n              console.log([lng, lat]);\n              data.features[0].geometry.coordinates.push([lng, lat]);\n              map.getSource(\"trace\").setData(data);\n            });\n          }}\n        </MapContext.Consumer>\n      </Map>\n    </div>\n  );\n};\n\nexport default MapView;\n","import React from \"react\";\nimport { mapCsvToPositions } from \"./lib/mapCsvToPositions\";\nimport styles from \"./FileInput.module.css\";\n\nconst defaultValue = `M,UL997,37.821608S,145.313996E,470668.68,3,3.4\nP,UL997,12.68,26.3,3.4,41.3,0.0`;\n\nexport const FileInput = () => {\n  const [text, setText] = React.useState(defaultValue);\n  const [result, setResult] = React.useState(\"\");\n  const onClick = () => {\n    const res = mapCsvToPositions(text);\n    console.log(res);\n    setResult(JSON.stringify(res, null, 2));\n  };\n  return (\n    <div className={styles.fileInputContainer}>\n      <textarea value={text} onChange={(e) => setText(e.target.value)} />\n      <button onClick={onClick}>submit</button>\n      <pre>{result}</pre>\n    </div>\n  );\n};\n","export const mapCsvToPositions = (text) => {\n  const results = text.split(\"\\n\").map((line) => {\n    console.log(line);\n    const chunks = line.split(\",\");\n    if (chunks.length === 0) {\n      return null;\n    }\n    console.log(\"chunks length: \", chunks.length);\n    const code = chunks[0];\n    if (code !== \"M\" || chunks.length !== 7) {\n      return null;\n    }\n    const id = chunks[1];\n    const lat = chunks[2];\n    const long = chunks[3];\n    return { id, lat, long };\n  });\n  return results.filter((r) => r !== null);\n};\n","import React from \"react\";\nimport Map from \"./Map\";\nimport styles from \"./App.module.css\";\nimport { FileInput } from \"./FileInput\";\n\nfunction App() {\n  return (\n    <div className={styles.appContainer}>\n      <FileInput />\n      <Map />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}